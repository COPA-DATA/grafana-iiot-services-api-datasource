/*! For license information please see module.js.LICENSE.txt */
define(["react","@grafana/ui","@grafana/data","@grafana/runtime","lodash"],(function(e,r,t,a,n){return function(e){var r={};function t(a){if(r[a])return r[a].exports;var n=r[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,t),n.l=!0,n.exports}return t.m=e,t.c=r,t.d=function(e,r,a){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:a})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(t.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var n in e)t.d(a,n,function(r){return e[r]}.bind(null,n));return a},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="/",t(t.s=57)}([function(r,t){r.exports=e},function(e,t){e.exports=r},function(e,r){e.exports=t},function(e,r){e.exports=a},function(e,r){e.exports=function(e){var r=typeof e;return null!=e&&("object"==r||"function"==r)}},function(e,r,t){var a=t(10),n=t(30),i=t(31),o=a?a.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":o&&o in Object(e)?n(e):i(e)}},function(e,r,t){var a=t(11),n="object"==typeof self&&self&&self.Object===Object&&self,i=a||n||Function("return this")();e.exports=i},function(e,r){e.exports=function(e){return null!=e&&"object"==typeof e}},function(e,r){e.exports=function(e){return e}},function(e,r,t){var a=t(5),n=t(4);e.exports=function(e){if(!n(e))return!1;var r=a(e);return"[object Function]"==r||"[object GeneratorFunction]"==r||"[object AsyncFunction]"==r||"[object Proxy]"==r}},function(e,r,t){var a=t(6).Symbol;e.exports=a},function(e,r,t){(function(r){var t="object"==typeof r&&r&&r.Object===Object&&r;e.exports=t}).call(this,t(29))},function(e,r){e.exports=function(e,r){return e===r||e!=e&&r!=r}},function(e,r,t){var a=t(9),n=t(14);e.exports=function(e){return null!=e&&n(e.length)&&!a(e)}},function(e,r){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},function(e,r){var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,r){var a=typeof e;return!!(r=null==r?9007199254740991:r)&&("number"==a||"symbol"!=a&&t.test(e))&&e>-1&&e%1==0&&e<r}},function(e,r){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,r,t){var a=t(53);"string"==typeof a&&(a=[[e.i,a,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};t(55)(a,n);a.locals&&(e.exports=a.locals)},function(e,r,t){var a=t(20),n=t(12),i=t(37),o=t(38),l=Object.prototype,s=l.hasOwnProperty,c=a((function(e,r){e=Object(e);var t=-1,a=r.length,c=a>2?r[2]:void 0;for(c&&i(r[0],r[1],c)&&(a=1);++t<a;)for(var u=r[t],f=o(u),d=-1,v=f.length;++d<v;){var p=f[d],m=e[p];(void 0===m||n(m,l[p])&&!s.call(e,p))&&(e[p]=u[p])}return e}));e.exports=c},function(e,r){e.exports=n},function(e,r,t){var a=t(8),n=t(21),i=t(23);e.exports=function(e,r){return i(n(e,r,a),e+"")}},function(e,r,t){var a=t(22),n=Math.max;e.exports=function(e,r,t){return r=n(void 0===r?e.length-1:r,0),function(){for(var i=arguments,o=-1,l=n(i.length-r,0),s=Array(l);++o<l;)s[o]=i[r+o];o=-1;for(var c=Array(r+1);++o<r;)c[o]=i[o];return c[r]=t(s),a(e,this,c)}}},function(e,r){e.exports=function(e,r,t){switch(t.length){case 0:return e.call(r);case 1:return e.call(r,t[0]);case 2:return e.call(r,t[0],t[1]);case 3:return e.call(r,t[0],t[1],t[2])}return e.apply(r,t)}},function(e,r,t){var a=t(24),n=t(36)(a);e.exports=n},function(e,r,t){var a=t(25),n=t(26),i=t(8),o=n?function(e,r){return n(e,"toString",{configurable:!0,enumerable:!1,value:a(r),writable:!0})}:i;e.exports=o},function(e,r){e.exports=function(e){return function(){return e}}},function(e,r,t){var a=t(27),n=function(){try{var e=a(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=n},function(e,r,t){var a=t(28),n=t(35);e.exports=function(e,r){var t=n(e,r);return a(t)?t:void 0}},function(e,r,t){var a=t(9),n=t(32),i=t(4),o=t(34),l=/^\[object .+?Constructor\]$/,s=Function.prototype,c=Object.prototype,u=s.toString,f=c.hasOwnProperty,d=RegExp("^"+u.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!i(e)||n(e))&&(a(e)?d:l).test(o(e))}},function(e,r){var t;t=function(){return this}();try{t=t||new Function("return this")()}catch(e){"object"==typeof window&&(t=window)}e.exports=t},function(e,r,t){var a=t(10),n=Object.prototype,i=n.hasOwnProperty,o=n.toString,l=a?a.toStringTag:void 0;e.exports=function(e){var r=i.call(e,l),t=e[l];try{e[l]=void 0;var a=!0}catch(e){}var n=o.call(e);return a&&(r?e[l]=t:delete e[l]),n}},function(e,r){var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},function(e,r,t){var a,n=t(33),i=(a=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||""))?"Symbol(src)_1."+a:"";e.exports=function(e){return!!i&&i in e}},function(e,r,t){var a=t(6)["__core-js_shared__"];e.exports=a},function(e,r){var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},function(e,r){e.exports=function(e,r){return null==e?void 0:e[r]}},function(e,r){var t=Date.now;e.exports=function(e){var r=0,a=0;return function(){var n=t(),i=16-(n-a);if(a=n,i>0){if(++r>=800)return arguments[0]}else r=0;return e.apply(void 0,arguments)}}},function(e,r,t){var a=t(12),n=t(13),i=t(15),o=t(4);e.exports=function(e,r,t){if(!o(t))return!1;var l=typeof r;return!!("number"==l?n(t)&&i(r,t.length):"string"==l&&r in t)&&a(t[r],e)}},function(e,r,t){var a=t(39),n=t(50),i=t(13);e.exports=function(e){return i(e)?a(e,!0):n(e)}},function(e,r,t){var a=t(40),n=t(41),i=t(43),o=t(44),l=t(15),s=t(46),c=Object.prototype.hasOwnProperty;e.exports=function(e,r){var t=i(e),u=!t&&n(e),f=!t&&!u&&o(e),d=!t&&!u&&!f&&s(e),v=t||u||f||d,p=v?a(e.length,String):[],m=p.length;for(var h in e)!r&&!c.call(e,h)||v&&("length"==h||f&&("offset"==h||"parent"==h)||d&&("buffer"==h||"byteLength"==h||"byteOffset"==h)||l(h,m))||p.push(h);return p}},function(e,r){e.exports=function(e,r){for(var t=-1,a=Array(e);++t<e;)a[t]=r(t);return a}},function(e,r,t){var a=t(42),n=t(7),i=Object.prototype,o=i.hasOwnProperty,l=i.propertyIsEnumerable,s=a(function(){return arguments}())?a:function(e){return n(e)&&o.call(e,"callee")&&!l.call(e,"callee")};e.exports=s},function(e,r,t){var a=t(5),n=t(7);e.exports=function(e){return n(e)&&"[object Arguments]"==a(e)}},function(e,r){var t=Array.isArray;e.exports=t},function(e,r,t){(function(e){var a=t(6),n=t(45),i=r&&!r.nodeType&&r,o=i&&"object"==typeof e&&e&&!e.nodeType&&e,l=o&&o.exports===i?a.Buffer:void 0,s=(l?l.isBuffer:void 0)||n;e.exports=s}).call(this,t(16)(e))},function(e,r){e.exports=function(){return!1}},function(e,r,t){var a=t(47),n=t(48),i=t(49),o=i&&i.isTypedArray,l=o?n(o):a;e.exports=l},function(e,r,t){var a=t(5),n=t(14),i=t(7),o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object DataView]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1,e.exports=function(e){return i(e)&&n(e.length)&&!!o[a(e)]}},function(e,r){e.exports=function(e){return function(r){return e(r)}}},function(e,r,t){(function(e){var a=t(11),n=r&&!r.nodeType&&r,i=n&&"object"==typeof e&&e&&!e.nodeType&&e,o=i&&i.exports===n&&a.process,l=function(){try{var e=i&&i.require&&i.require("util").types;return e||o&&o.binding&&o.binding("util")}catch(e){}}();e.exports=l}).call(this,t(16)(e))},function(e,r,t){var a=t(4),n=t(51),i=t(52),o=Object.prototype.hasOwnProperty;e.exports=function(e){if(!a(e))return i(e);var r=n(e),t=[];for(var l in e)("constructor"!=l||!r&&o.call(e,l))&&t.push(l);return t}},function(e,r){var t=Object.prototype;e.exports=function(e){var r=e&&e.constructor;return e===("function"==typeof r&&r.prototype||t)}},function(e,r){e.exports=function(e){var r=[];if(null!=e)for(var t in Object(e))r.push(t);return r}},function(e,r,t){(r=t(54)(!0)).push([e.i,".min-width-10 {\n  min-width: 10rem; }\n\n.min-width-12 {\n  min-width: 12rem; }\n\n.min-width-20 {\n  min-width: 20rem; }\n\n.margin-1 {\n  padding-left: 0.5rem;\n  padding-right: 0.5rem; }\n\n.center {\n  margin-top: 0.5rem;\n  margin-left: 0.5rem;\n  margin-right: 0.5rem; }\n","",{version:3,sources:["app.css"],names:[],mappings:"AAAA;EACE,gBAAgB,EAAE;;AAEpB;EACE,gBAAgB,EAAE;;AAEpB;EACE,gBAAgB,EAAE;;AAEpB;EACE,oBAAoB;EACpB,qBAAqB,EAAE;;AAEzB;EACE,kBAAkB;EAClB,mBAAmB;EACnB,oBAAoB,EAAE",file:"app.css",sourcesContent:[".min-width-10 {\n  min-width: 10rem; }\n\n.min-width-12 {\n  min-width: 12rem; }\n\n.min-width-20 {\n  min-width: 20rem; }\n\n.margin-1 {\n  padding-left: 0.5rem;\n  padding-right: 0.5rem; }\n\n.center {\n  margin-top: 0.5rem;\n  margin-left: 0.5rem;\n  margin-right: 0.5rem; }\n"]}]),e.exports=r},function(e,r,t){"use strict";e.exports=function(e){var r=[];return r.toString=function(){return this.map((function(r){var t=function(e,r){var t=e[1]||"",a=e[3];if(!a)return t;if(r&&"function"==typeof btoa){var n=(o=a,l=btoa(unescape(encodeURIComponent(JSON.stringify(o)))),s="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(l),"/*# ".concat(s," */")),i=a.sources.map((function(e){return"/*# sourceURL=".concat(a.sourceRoot||"").concat(e," */")}));return[t].concat(i).concat([n]).join("\n")}var o,l,s;return[t].join("\n")}(r,e);return r[2]?"@media ".concat(r[2]," {").concat(t,"}"):t})).join("")},r.i=function(e,t,a){"string"==typeof e&&(e=[[null,e,""]]);var n={};if(a)for(var i=0;i<this.length;i++){var o=this[i][0];null!=o&&(n[o]=!0)}for(var l=0;l<e.length;l++){var s=[].concat(e[l]);a&&n[s[0]]||(t&&(s[2]?s[2]="".concat(t," and ").concat(s[2]):s[2]=t),r.push(s))}},r}},function(e,r,t){var a,n,i={},o=(a=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===n&&(n=a.apply(this,arguments)),n}),l=function(e,r){return r?r.querySelector(e):document.querySelector(e)},s=function(e){var r={};return function(e,t){if("function"==typeof e)return e();if(void 0===r[e]){var a=l.call(this,e,t);if(window.HTMLIFrameElement&&a instanceof window.HTMLIFrameElement)try{a=a.contentDocument.head}catch(e){a=null}r[e]=a}return r[e]}}(),c=null,u=0,f=[],d=t(56);function v(e,r){for(var t=0;t<e.length;t++){var a=e[t],n=i[a.id];if(n){n.refs++;for(var o=0;o<n.parts.length;o++)n.parts[o](a.parts[o]);for(;o<a.parts.length;o++)n.parts.push(g(a.parts[o],r))}else{var l=[];for(o=0;o<a.parts.length;o++)l.push(g(a.parts[o],r));i[a.id]={id:a.id,refs:1,parts:l}}}}function p(e,r){for(var t=[],a={},n=0;n<e.length;n++){var i=e[n],o=r.base?i[0]+r.base:i[0],l={css:i[1],media:i[2],sourceMap:i[3]};a[o]?a[o].parts.push(l):t.push(a[o]={id:o,parts:[l]})}return t}function m(e,r){var t=s(e.insertInto);if(!t)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var a=f[f.length-1];if("top"===e.insertAt)a?a.nextSibling?t.insertBefore(r,a.nextSibling):t.appendChild(r):t.insertBefore(r,t.firstChild),f.push(r);else if("bottom"===e.insertAt)t.appendChild(r);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var n=s(e.insertAt.before,t);t.insertBefore(r,n)}}function h(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var r=f.indexOf(e);r>=0&&f.splice(r,1)}function y(e){var r=document.createElement("style");if(void 0===e.attrs.type&&(e.attrs.type="text/css"),void 0===e.attrs.nonce){var a=function(){0;return t.nc}();a&&(e.attrs.nonce=a)}return b(r,e.attrs),m(e,r),r}function b(e,r){Object.keys(r).forEach((function(t){e.setAttribute(t,r[t])}))}function g(e,r){var t,a,n,i;if(r.transform&&e.css){if(!(i="function"==typeof r.transform?r.transform(e.css):r.transform.default(e.css)))return function(){};e.css=i}if(r.singleton){var o=u++;t=c||(c=y(r)),a=A.bind(null,t,o,!1),n=A.bind(null,t,o,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(t=function(e){var r=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",b(r,e.attrs),m(e,r),r}(r),a=S.bind(null,t,r),n=function(){h(t),t.href&&URL.revokeObjectURL(t.href)}):(t=y(r),a=x.bind(null,t),n=function(){h(t)});return a(e),function(r){if(r){if(r.css===e.css&&r.media===e.media&&r.sourceMap===e.sourceMap)return;a(e=r)}else n()}}e.exports=function(e,r){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(r=r||{}).attrs="object"==typeof r.attrs?r.attrs:{},r.singleton||"boolean"==typeof r.singleton||(r.singleton=o()),r.insertInto||(r.insertInto="head"),r.insertAt||(r.insertAt="bottom");var t=p(e,r);return v(t,r),function(e){for(var a=[],n=0;n<t.length;n++){var o=t[n];(l=i[o.id]).refs--,a.push(l)}e&&v(p(e,r),r);for(n=0;n<a.length;n++){var l;if(0===(l=a[n]).refs){for(var s=0;s<l.parts.length;s++)l.parts[s]();delete i[l.id]}}}};var E,w=(E=[],function(e,r){return E[e]=r,E.filter(Boolean).join("\n")});function A(e,r,t,a){var n=t?"":a.css;if(e.styleSheet)e.styleSheet.cssText=w(r,n);else{var i=document.createTextNode(n),o=e.childNodes;o[r]&&e.removeChild(o[r]),o.length?e.insertBefore(i,o[r]):e.appendChild(i)}}function x(e,r){var t=r.css,a=r.media;if(a&&e.setAttribute("media",a),e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}function S(e,r,t){var a=t.css,n=t.sourceMap,i=void 0===r.convertToAbsoluteUrls&&n;(r.convertToAbsoluteUrls||i)&&(a=d(a)),n&&(a+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */");var o=new Blob([a],{type:"text/css"}),l=e.href;e.href=URL.createObjectURL(o),l&&URL.revokeObjectURL(l)}},function(e,r){e.exports=function(e){var r="undefined"!=typeof window&&window.location;if(!r)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var t=r.protocol+"//"+r.host,a=t+r.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,r){var n,i=r.trim().replace(/^"(.*)"$/,(function(e,r){return r})).replace(/^'(.*)'$/,(function(e,r){return r}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i)?e:(n=0===i.indexOf("//")?i:0===i.indexOf("/")?t+i:a+i.replace(/^\.\//,""),"url("+JSON.stringify(n)+")")}))}},function(e,r,t){"use strict";t.r(r);var a=t(2),n=function(e,r){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t])})(e,r)};function i(e,r){function t(){this.constructor=e}n(e,r),e.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)}var o,l,s=function(){return(s=Object.assign||function(e){for(var r,t=1,a=arguments.length;t<a;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n]);return e}).apply(this,arguments)};function c(e,r,t,a){return new(t||(t=Promise))((function(n,i){function o(e){try{s(a.next(e))}catch(e){i(e)}}function l(e){try{s(a.throw(e))}catch(e){i(e)}}function s(e){var r;e.done?n(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,l)}s((a=a.apply(e,r||[])).next())}))}function u(e,r){var t,a,n,i,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;o;)try{if(t=1,a&&(n=2&i[0]?a.return:i[0]?a.throw||((n=a.return)&&n.call(a),0):a.next)&&!(n=n.call(a,i[1])).done)return n;switch(a=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,a=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(n=o.trys,(n=n.length>0&&n[n.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){o.label=i[1];break}if(6===i[0]&&o.label<n[1]){o.label=n[1],n=i;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(i);break}n[2]&&o.ops.pop(),o.trys.pop();continue}i=r.call(e,o)}catch(e){i=[6,e],a=0}finally{t=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}function f(e){var r="function"==typeof Symbol&&Symbol.iterator,t=r&&e[r],a=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&a>=e.length&&(e=void 0),{value:e&&e[a++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}!function(e){e.ArchiveData="archiveData",e.VariableValues="variableValues",e.Alarms="alarms",e.Events="events"}(o||(o={})),function(e){e.Datasources="Datasources",e.ArchivesForDatasource="ArchivesForDataSource",e.VariablesForArchive="VariablesForArchive",e.VariablesForDatasource="VariablesForDatasource"}(l||(l={}));var d={queryType:o.ArchiveData,alarmsEventsFilter:{variables:["*"],onlyActive:!1,onlyCleared:!1,onlyUnacknowledged:!1},archiveFilter:{variables:[]},variableFilter:{variables:[]}},v={queryType:l.Datasources},p=t(3),m=function(e){function r(r){var t=e.call(this,r)||this;return t.url=r.url,t}return i(r,e),r.prototype.query=function(e){return c(this,void 0,Promise,(function(){var r,t,a,n,i,l,s,c,d,v=this;return u(this,(function(u){if((r=e.targets.filter((function(e){return 1!=e.hide}))).forEach((function(r){r=v.replaceTemplateVariables(r,e.scopedVars)})),t=e.range.from,a=e.range.to,0===r.length)return[2,Promise.resolve({data:[]})];n=[];try{for(i=f(r),l=i.next();!l.done;l=i.next())if((s=l.value).datasourceId&&(s.queryType!=o.ArchiveData||s.archiveFilter.archiveId&&0!=s.archiveFilter.variables.length))switch(s.queryType){case o.ArchiveData:n.push(this.queryArchiveValues(s,t,a));break;case o.Alarms:case o.Events:n.push(this.queryAlarmsEvents(s,t,a));break;case o.VariableValues:n.push(this.queryOnlineValues(s))}}catch(e){c={error:e}}finally{try{l&&!l.done&&(d=i.return)&&d.call(i)}finally{if(c)throw c.error}}return[2,Promise.all(n).then((function(e){return Promise.resolve({data:e.flat()})}))]}))}))},r.prototype.replaceTemplateVariables=function(e,r){e.datasourceId=Object(p.getTemplateSrv)().replace(e.datasourceId,r),e.archiveFilter.archiveId=Object(p.getTemplateSrv)().replace(e.archiveFilter.archiveId,r);var t=function(e){var t,a,n=[];try{for(var i=f(e),o=i.next();!o.done;o=i.next()){var l=o.value,s=Object(p.getTemplateSrv)().replace(l,r);'["'==s.substr(0,2)?n=n.concat(JSON.parse(s)):n.push(s.replace(/['"]+/g,""))}}catch(e){t={error:e}}finally{try{o&&!o.done&&(a=i.return)&&a.call(i)}finally{if(t)throw t.error}}return n};return e.archiveFilter.variables=t(e.archiveFilter.variables),e.alarmsEventsFilter.variables=t(e.alarmsEventsFilter.variables),e.variableFilter.variables=t(e.variableFilter.variables),e},r.prototype.metricFindQuery=function(e,r){return c(this,void 0,Promise,(function(){return u(this,(function(r){switch(e.queryType){case l.Datasources:return[2,this.findDataSources().then((function(e){var r,t,a=[];try{for(var n=f(e),i=n.next();!i.done;i=n.next()){var o=i.value;a.push({text:o.label+" | "+o.value})}}catch(e){r={error:e}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(r)throw r.error}}return Promise.resolve(a)}))];case l.ArchivesForDatasource:return[2,this.findArchives(e.datasourceId).then((function(e){var r,t,a=[];try{for(var n=f(e),i=n.next();!i.done;i=n.next()){var o=i.value;a.push({text:o.label+" | "+o.value})}}catch(e){r={error:e}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(r)throw r.error}}return Promise.resolve(a)}))];case l.VariablesForArchive:return[2,this.findVariablesForArchive(e.datasourceId,e.archiveId).then((function(e){var r,t,a=[];try{for(var n=f(e),i=n.next();!i.done;i=n.next()){var o=i.value;a.push({text:o.label+" | "+o.value})}}catch(e){r={error:e}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(r)throw r.error}}return Promise.resolve(a)}))];case l.VariablesForDatasource:return[2,this.findVariables(e.datasourceId).then((function(e){var r,t,a=[];try{for(var n=f(e),i=n.next();!i.done;i=n.next()){var o=i.value;a.push({text:o.label+" | "+o.value})}}catch(e){r={error:e}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(r)throw r.error}}return Promise.resolve(a)}))]}return[2]}))}))},r.prototype.testDatasource=function(){return c(this,void 0,void 0,(function(){return u(this,(function(e){return[2,Object(p.getBackendSrv)().datasourceRequest({url:this.url+"/",method:"GET"}).then((function(e){return Promise.resolve({status:"success",message:"Connection test successful"})}),(function(e){return Promise.resolve({status:"error",message:"Error: "+e.status+" "+e.statusText})}))]}))}))},r.prototype.queryArchiveValues=function(e,r,t){var n=this.url+"/api/v1/datasources/"+e.datasourceId+"/archives/"+e.archiveFilter.archiveId+"/query",i={variableFilter:{variablenames:e.archiveFilter.variables},timeFilter:{from:r.toISOString(),to:t.toISOString(),type:"Absolute"}};return Object(p.getBackendSrv)().datasourceRequest({url:n,data:i,method:"POST"}).then((function(r){var t,n,i,o,l;if(!("data"in r)||!("variables"in r.data))throw{data:{message:"Query Error: Retrieved data has invalid format"}};var s=r.data.variables,c=[];try{for(var u=f(s),d=u.next();!d.done;d=u.next()){var v=d.value,p=new a.MutableDataFrame({refId:e.refId,fields:[{name:v.archiveVariable.variableName,type:a.FieldType.number},{name:"time",type:a.FieldType.time}]});try{for(var m=(i=void 0,f(v.values)),h=m.next();!h.done;h=m.next()){var y=h.value,b=Date.parse(y.timestamp),g=y.value;isNaN(g)||(g=Number(g)),p.add(((l={time:b})[v.archiveVariable.variableName]=g,l))}}catch(e){i={error:e}}finally{try{h&&!h.done&&(o=m.return)&&o.call(m)}finally{if(i)throw i.error}}if(!("archiveVariable"in v)||!("variableName"in v.archiveVariable))throw{data:{message:"Query Error: Retrieved data has invalid format"}};c.push(p)}}catch(e){t={error:e}}finally{try{d&&!d.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}return Promise.resolve(c)}),this.handleHttpErrors).catch(this.handleQueryException)},r.prototype.queryOnlineValues=function(e){var r=this.url+"/api/v1/datasources/"+e.datasourceId+"/variables/query",t={nameFilter:{variableNames:e.variableFilter.variables},fields:["name","value","lastUpdateTime"]};return Object(p.getBackendSrv)().datasourceRequest({url:r,data:t,method:"POST"}).then((function(r){var t,n,i;if(!("data"in r)||!("variables"in r.data))throw{data:{message:"Query Error: Retrieved data has invalid format"}};var o=r.data.variables,l=[];try{for(var s=f(o),c=s.next();!c.done;c=s.next()){var u=c.value,d=new a.MutableDataFrame({refId:e.refId,fields:[{name:u.name,type:a.FieldType.number},{name:"time",type:a.FieldType.time}]});d.add(((i={time:u.lastUpdateTime})[u.name]=u.value,i)),l.push(d)}}catch(e){t={error:e}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return Promise.resolve(l)}),this.handleHttpErrors).catch(this.handleQueryException)},r.prototype.queryAlarmsEvents=function(e,r,t){var n=this.url+"/api/v1/datasources/"+e.datasourceId;e.queryType==o.Alarms?n+="/alarms/query":e.queryType==o.Events&&(n+="/events/query");var i={timeFilter:{from:r.toISOString(),to:t.toISOString(),type:"Absolute"},variableFilter:{variableNames:e.alarmsEventsFilter.variables}};if(void 0!==e.alarmsEventsFilter&&e.queryType==o.Alarms){var l=[];e.alarmsEventsFilter.onlyActive&&l.push("OnlyActive"),e.alarmsEventsFilter.onlyCleared&&l.push("OnlyCleared"),e.alarmsEventsFilter.onlyUnacknowledged&&l.push("OnlyUnacknowledged"),l.length>0&&(i.filterFlags=l)}return Object(p.getBackendSrv)().datasourceRequest({url:n,data:i,method:"POST"}).then((function(r){var t,n,i,l;if(!("data"in r)||e.queryType==o.Alarms&&!("alarms"in r.data)||e.queryType==o.Events&&!("events"in r.data))throw{data:{message:"Query Error: Retrieved data has invalid format"}};var s=[];"alarms"in r.data?s=r.data.alarms:"events"in r.data&&(s=r.data.events);var c=void 0;switch(e.queryType){default:case o.Alarms:var u=new a.MutableDataFrame({refId:e.refId,fields:[{name:"id",type:a.FieldType.string,config:{displayName:"Id"}},{name:"variableName",type:a.FieldType.string,config:{displayName:"Variable Name"}},{name:"value",type:a.FieldType.other,config:{displayName:"Value"}},{name:"text",type:a.FieldType.string,config:{displayName:"Text"}},{name:"comment",type:a.FieldType.string,config:{displayName:"Comment"}},{name:"receivedTime",type:a.FieldType.time,config:{displayName:"Time Received"}},{name:"clearedTime",type:a.FieldType.time,config:{displayName:"Time Cleared"}},{name:"acknowledgedTime",type:a.FieldType.time,config:{displayName:"Time Acknowledged"}},{name:"computer",type:a.FieldType.string,config:{displayName:"Computer"}},{name:"acknowledgedBy",type:a.FieldType.string,config:{displayName:"Acknowledged by"}}]});try{for(var d=f(s),v=d.next();!v.done;v=d.next()){var p=v.value;u.add({id:p.id||null,variableName:p.variableName||null,value:p.value||null,text:p.text||null,comment:p.comment||null,receivedTime:Date.parse(p.receivedTime)||null,clearedTime:Date.parse(p.clearedTime)||null,acknowledgedTime:Date.parse(p.acknowledgedTime)||null,computer:p.computer||null,acknowledgedBy:p.username||p.userFullName||null})}}catch(e){t={error:e}}finally{try{v&&!v.done&&(n=d.return)&&n.call(d)}finally{if(t)throw t.error}}c=u;break;case o.Events:var m=new a.MutableDataFrame({refId:e.refId,fields:[{name:"id",type:a.FieldType.string,config:{displayName:"Id"}},{name:"variableName",type:a.FieldType.string,config:{displayName:"Variable Name"}},{name:"value",type:a.FieldType.other,config:{displayName:"Value"}},{name:"text",type:a.FieldType.string,config:{displayName:"Text"}},{name:"comment",type:a.FieldType.string,config:{displayName:"Comment"}},{name:"receivedTime",type:a.FieldType.time,config:{displayName:"Time Received"}},{name:"computer",type:a.FieldType.string,config:{displayName:"Computer"}},{name:"user",type:a.FieldType.string,config:{displayName:"User"}}]});try{for(var h=f(s),y=h.next();!y.done;y=h.next()){p=y.value;m.add({id:p.id||null,variableName:p.variableName||null,value:p.value||null,text:p.text||null,comment:p.comment||null,receivedTime:Date.parse(p.receivedTime)||null,computer:p.computer||null,user:p.username||p.userFullName||null})}}catch(e){i={error:e}}finally{try{y&&!y.done&&(l=h.return)&&l.call(h)}finally{if(i)throw i.error}}c=m}return Promise.resolve([c])}),this.handleHttpErrors).catch(this.handleQueryException)},r.prototype.findDataSources=function(e){return void 0===e&&(e=!0),Object(p.getBackendSrv)().datasourceRequest({url:this.url+"/api/v1/datasources",method:"GET"}).then((function(r){var t,a,n=[];if(!("dataSources"in r.data))throw{data:{message:"Query Error: Could not parse list of data sources"}};var i=r.data.dataSources;if(void 0===i||i instanceof Array==0)throw{data:{message:"Query Error: Could not parse list of data sources"}};try{for(var o=f(i),l=o.next();!l.done;l=o.next()){var s=l.value;if(!("dataSourceId"in s)||!("name"in s)||!("state"in s))throw{data:{message:"Query Error: Unknown/Invalid format"}};if("Online"==s.state||!e){var c={label:s.name,value:s.dataSourceId};n.push(c)}}}catch(e){t={error:e}}finally{try{l&&!l.done&&(a=o.return)&&a.call(o)}finally{if(t)throw t.error}}return n.sort((function(e,r){return e.label>r.label?1:-1})),Promise.resolve(n)}),this.handleHttpErrors).catch(this.handleQueryException)},r.prototype.findArchives=function(e){return null==e||""==e?Promise.resolve([]):(e=Object(p.getTemplateSrv)().replace(e),Object(p.getBackendSrv)().datasourceRequest({url:this.url+"/api/v1/datasources/"+e+"/archives",method:"GET"}).then((function(e){var r=[];if(!("archives"in e.data))throw{data:{message:"Query Error: Could not parse list of archives"}};var t=e.data.archives;if(void 0===t||t instanceof Array==0)throw{data:{message:"Query Error: Could not parse list of archives"}};return function e(t,a){var n,i;try{for(var o=f(t),l=o.next();!l.done;l=o.next()){var s=l.value;if(!("identification"in s)||!("name"in s))throw{data:{message:"Query Error: Unknown/Invalid format"}};var c={label:(a?"- aggregated - ":"")+s.name,value:s.identification};r.push(c),"aggregatedArchives"in s&&e(s.aggregatedArchives,!0)}}catch(e){n={error:e}}finally{try{l&&!l.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}}(t,!1),r.sort((function(e,r){return e.label.replace(/- aggregated - /,"")>r.label.replace(/- aggregated - /,"")?1:-1})),Promise.resolve(r)}),(function(e){return Promise.resolve([])})))},r.prototype.findVariablesForArchive=function(e,r){return null==e||""==e||null==r||""==r?Promise.resolve([]):(e=Object(p.getTemplateSrv)().replace(e),r=Object(p.getTemplateSrv)().replace(r),Object(p.getBackendSrv)().datasourceRequest({url:this.url+"/api/v1/datasources/"+e+"/archives/"+r,method:"GET"}).then((function(e){if(!("variables"in e.data))throw{data:{message:"Query Error: Could not parse list of variables"}};var r=e.data.variables;if(void 0===r||r instanceof Array==0)throw{data:{message:"Query Error: Could not parse list of variables"}};var t=r.map((function(e){return{label:e.variableName,value:e.variableName}}));return t.sort((function(e,r){return e.label>r.label?1:-1})),Promise.resolve(t)}),this.handleHttpErrors).catch(this.handleQueryException))},r.prototype.findVariables=function(e){if(null==e||""==e)return Promise.resolve([]);e=Object(p.getTemplateSrv)().replace(e);var r=this.url+"/api/v1/datasources/"+e+"/variables/query";return Object(p.getBackendSrv)().datasourceRequest({url:r,data:{fields:["name"],nameFilter:{variableNames:["*"]}},method:"POST"}).then((function(e){if(!("variables"in e.data))throw{data:{message:"Query Error: Could not parse list of variables"}};var r=e.data.variables.map((function(e){return{label:e.name,value:e.name}}));return r.sort((function(e,r){return e.label>r.label?1:-1})),Promise.resolve(r)}),this.handleHttpErrors).catch(this.handleQueryException)},r.prototype.handleHttpErrors=function(e){throw 401===e.status&&(e.message="Authorization Error: "+e.status+" Unauthorized"),400==e.status&&(void 0!==e.data&&void 0!==e.data.errorMessage&&void 0!==e.data.variableErrors?e.message="Bad Request: "+e.data.errorMessage+"; Details: "+JSON.stringify(e.data.variableErrors):e.message="Bad Request"),503==e.status&&(e.message=e.data.errorMessage),new Error(e.message)},r.prototype.handleQueryException=function(e){return"data"in e&&void 0!==e.data?Promise.reject(e):Promise.reject({data:{message:"Query Error: Error during requesting data from API. "+e.message}})},r}(a.DataSourceApi),h=t(0),y=t.n(h),b=t(1),g=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.onOptionsChange=function(e){var t=r.props,a=t.onOptionsChange,n=t.options,i=s(s({},n.jsonData),{path:e.target.value});a(s(s({},n),{jsonData:i}))},r}return i(r,e),r.prototype.render=function(){var e=this.props,r=e.options,t=e.onOptionsChange;return y.a.createElement("div",{className:"gf-form-group"},y.a.createElement("div",{className:"gf-form"},y.a.createElement(b.DataSourceHttpSettings,{defaultUrl:"http://localhost:9400",dataSourceConfig:r,showAccessOptions:!0,onChange:t})))},r}(h.PureComponent),E=t(18),w=t.n(E),A=(t(17),function(e){function r(r){var t=e.call(this,r)||this;t.getTemplateVariables=function(e){var r,t,a=Object(p.getTemplateSrv)().getVariables(),n=JSON.stringify(a),i=JSON.parse(n),o=[];try{for(var l=f(i),s=l.next();!s.done;s=l.next()){var c=s.value;"query"==c.type&&c.query.queryType==e&&o.push(c)}}catch(e){r={error:e}}finally{try{s&&!s.done&&(t=l.return)&&t.call(l)}finally{if(r)throw r.error}}return o},t.componentDidMount=function(){t.props.datasource.findDataSources().then((function(e){var r,a,n=t.getTemplateVariables(l.Datasources);try{for(var i=f(n),o=i.next();!o.done;o=i.next()){var s=o.value;e.unshift({label:"$"+s.name,value:"$"+s.name})}}catch(e){r={error:e}}finally{try{o&&!o.done&&(a=i.return)&&a.call(i)}finally{if(r)throw r.error}}t.setState({datasourceSelectables:e})}))},t.loadArchives=function(){var e=t.props,r=e.query,a=e.datasource;return new Promise((function(e){a.findArchives(r.datasourceId).then((function(r){var a,n,i=t.getTemplateVariables(l.ArchivesForDatasource);try{for(var o=f(i),s=o.next();!s.done;s=o.next()){var c=s.value;r.unshift({label:"$"+c.name,value:"$"+c.name})}}catch(e){a={error:e}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}t.setState({archiveSelectables:r}),e(r)}))}))},t.loadArchiveVariables=function(){var e=t.props,r=e.query,a=e.datasource;return new Promise((function(e){a.findVariablesForArchive(r.datasourceId,r.archiveFilter.archiveId).then((function(r){var a,n,i=t.getTemplateVariables(l.VariablesForArchive);try{for(var o=f(i),s=o.next();!s.done;s=o.next()){var c=s.value;r.unshift({label:"$"+c.name,value:"${"+c.name+":json}"})}}catch(e){a={error:e}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}t.setState({archiveVariableSelectables:r}),e(r)}))}))},t.loadVariables=function(){var e=t.props,r=e.query,a=e.datasource;return new Promise((function(e){a.findVariables(r.datasourceId).then((function(r){var a,n,i=t.getTemplateVariables(l.VariablesForDatasource);try{for(var o=f(i),s=o.next();!s.done;s=o.next()){var c=s.value;r.unshift({label:"$"+c.name,value:"${"+c.name+":json}"})}}catch(e){a={error:e}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}r.unshift({label:"*",value:"*"}),t.setState({variableSelectables:r}),e(r)}))}))},t.onSwitchChanged=function(e){var r=t.props,a=r.query;(0,r.onChange)(s(s({},a),{alarmsEventsFilter:s(s({},a.alarmsEventsFilter),{onlyActive:!a.alarmsEventsFilter.onlyActive})}))};var a={label:"Archive Data",value:o.ArchiveData},n={label:"Online Values",value:o.VariableValues},i={label:"Alarms",value:o.Alarms},c={label:"Events",value:o.Events};return t.state={datasourceSelectables:[],queryTypeSelectables:[a,n,i,c],archiveSelectables:[],archiveVariableSelectables:[],variableSelectables:[]},t}return i(r,e),r.prototype.render=function(){var e,r=w()(this.props.query,d),t=this.props,a=t.onChange,n=t.onRunQuery,i=r.datasourceId,l=r.queryType,c=r.archiveFilter,u=r.alarmsEventsFilter,f=r.variableFilter,v=y.a.createElement("div",{className:"gf-form-inline"},y.a.createElement("div",{className:"gf-form"},y.a.createElement(b.Label,{className:"gf-form-label query-keyword width-7 margin-1"},"Archive"),y.a.createElement(b.AsyncSelect,{className:"min-width-15",key:r.datasourceId,placeholder:"Select an archive...",onChange:function(e){a(s(s({},r),{archiveFilter:s(s({},r.archiveFilter),{archiveId:e.value})}))},loadOptions:this.loadArchives,defaultOptions:!0,value:this.state.archiveSelectables.find((function(e){return e.value==c.archiveId})),invalid:!this.state.archiveSelectables.find((function(e){return e.value==c.archiveId}))})),y.a.createElement("div",{className:"gf-form"},y.a.createElement(b.Label,{className:"gf-form-label query-keyword width-7 margin-1"},"Variable"),y.a.createElement(b.AsyncMultiSelect,{className:"min-width-15",key:r.archiveFilter.archiveId,placeholder:"Select a variable...",onChange:function(e){a(s(s({},r),{archiveFilter:s(s({},r.archiveFilter),{variables:e.map((function(e){return e.value}))})})),n()},loadOptions:this.loadArchiveVariables,defaultOptions:!0,value:this.state.archiveVariableSelectables.filter((function(e){return c.variables.includes(e.value)})),invalid:0==this.state.archiveVariableSelectables.filter((function(e){return c.variables.includes(e.value)})).length}))),p=y.a.createElement("div",{className:"gf-form-inline"},y.a.createElement("div",{className:"gf-form"},y.a.createElement(b.Label,{className:"gf-form-label query-keyword width-7 margin-1"},"Variable Filter"),y.a.createElement(b.AsyncMultiSelect,{className:"min-width-10",key:r.queryType,onChange:function(e){a(s(s({},r),{alarmsEventsFilter:s(s({},r.alarmsEventsFilter),{variables:e.map((function(e){return e.value}))})})),n()},loadOptions:this.loadVariables,defaultOptions:!0,value:this.state.variableSelectables.filter((function(e){return u.variables.includes(e.value)})),invalid:0==this.state.variableSelectables.filter((function(e){return u.variables.includes(e.value)})).length})),y.a.createElement("div",{className:"gf-form"},y.a.createElement(b.Label,{className:"gf-form-label query-keyword margin-1"},"Only Active"),y.a.createElement(b.Field,null,y.a.createElement("div",{className:"center"},y.a.createElement(b.Switch,{onChange:function(e){a(s(s({},r),{alarmsEventsFilter:s(s({},r.alarmsEventsFilter),{onlyActive:!r.alarmsEventsFilter.onlyActive})})),n()},value:u.onlyActive})))),y.a.createElement("div",{className:"gf-form"},y.a.createElement(b.Label,{className:"gf-form-label query-keyword margin-1"},"Only Cleared"),y.a.createElement(b.Field,null,y.a.createElement("div",{className:"center"},y.a.createElement(b.Switch,{onChange:function(e){a(s(s({},r),{alarmsEventsFilter:s(s({},r.alarmsEventsFilter),{onlyCleared:!r.alarmsEventsFilter.onlyCleared})})),n()},value:u.onlyCleared})))),y.a.createElement("div",{className:"gf-form"},y.a.createElement(b.Label,{className:"gf-form-label query-keyword margin-1"},"Only Unacknowledged"),y.a.createElement(b.Field,null,y.a.createElement("div",{className:"center"},y.a.createElement(b.Switch,{onChange:function(e){a(s(s({},r),{alarmsEventsFilter:s(s({},r.alarmsEventsFilter),{onlyUnacknowledged:!r.alarmsEventsFilter.onlyUnacknowledged})})),n()},value:u.onlyUnacknowledged}))))),m=y.a.createElement("div",{className:"gf-form-inline"},y.a.createElement("div",{className:"gf-form"},y.a.createElement(b.Label,{className:"gf-form-label query-keyword width-7 margin-1"},"Variable Filter"),y.a.createElement(b.AsyncMultiSelect,{className:"min-width-15",key:r.queryType,onChange:function(e){a(s(s({},r),{alarmsEventsFilter:s(s({},r.alarmsEventsFilter),{variables:e.map((function(e){return e.value}))})})),n()},loadOptions:this.loadVariables,defaultOptions:!0,value:this.state.variableSelectables.filter((function(e){return u.variables.includes(e.value)})),invalid:0==this.state.variableSelectables.filter((function(e){return u.variables.includes(e.value)})).length}))),h=y.a.createElement("div",{className:"gf-form-inline"},y.a.createElement("div",{className:"gf-form"},y.a.createElement(b.Label,{className:"gf-form-label query-keyword width-7 margin-1"},"Variable Filter"),y.a.createElement(b.AsyncMultiSelect,{className:"min-width-15",key:r.queryType,onChange:function(e){a(s(s({},r),{variableFilter:s(s({},r.variableFilter),{variables:e.map((function(e){return e.value}))})})),n()},loadOptions:this.loadVariables,defaultOptions:!0,value:this.state.variableSelectables.filter((function(e){return f.variables.includes(e.value)})),invalid:0==this.state.variableSelectables.filter((function(e){return f.variables.includes(e.value)})).length})));switch(r.queryType){case o.ArchiveData:e=v;break;case o.Alarms:e=p;break;case o.Events:e=m;break;case o.VariableValues:e=h}return y.a.createElement("div",null,y.a.createElement("div",{className:"gf-form-group"},y.a.createElement("div",{className:"gf-form-inline"},y.a.createElement("div",{className:"gf-form"},y.a.createElement(b.Label,{className:"gf-form-label query-keyword width-7 margin-1"},"Datasource"),y.a.createElement(b.Select,{className:"min-width-20",placeholder:"Select a datasource...",onChange:function(e){return a(s(s({},r),{datasourceId:e.value}))},options:this.state.datasourceSelectables,value:this.state.datasourceSelectables.find((function(e){return e.value==r.datasourceId})),invalid:!i}))),y.a.createElement("div",{className:"gf-form-inline"},y.a.createElement("div",{className:"gf-form"},y.a.createElement(b.Label,{className:"gf-form-label query-keyword width-7 margin-1"},"Query Type"),y.a.createElement(b.Select,{className:"min-width-10",onChange:function(e){a(s(s({},r),{queryType:e.value})),n()},options:this.state.queryTypeSelectables,value:this.state.queryTypeSelectables.find((function(e){return e.value==l}))}))),e))},r}(h.Component)),x=t(19),S=function(e){function r(r){var t=e.call(this,r)||this;t.loadDatasources=function(){var e=t.props.datasource;return new Promise((function(r){e.findDataSources().then((function(e){t.setState({datasourceSelectables:e}),r(e)}))}))},t.loadArchives=function(){var e=t.props,r=e.query,a=e.datasource;return new Promise((function(e){a.findArchives(r.datasourceId).then((function(r){t.setState({archiveSelectables:r}),e(r)}))}))};var a=[{label:"Datasources",value:l.Datasources},{label:"Archives for datasource",value:l.ArchivesForDatasource},{label:"Variables for datasource",value:l.VariablesForDatasource},{label:"Variables for archive",value:l.VariablesForArchive}];return t.state={datasourceSelectables:[],queryTypeSelectables:a,archiveSelectables:[],archiveVariableSelectables:[]},t}return i(r,e),r.prototype.render=function(){var e=Object(x.defaults)(this.props.query,v),r=this.props.onChange,t=y.a.createElement("div",{className:"gf-form-inline"},y.a.createElement("div",{className:"gf-form"},y.a.createElement(b.Label,{className:"gf-form-label query-keyword width-7 margin-1"},"Datasource"),y.a.createElement(b.AsyncSelect,{className:"min-width-20",key:e.queryType,placeholder:"Select a datasource...",onChange:function(t){r(s(s({},e),{datasourceId:t.value}),"Archives for the Service Grid Datasource "+t.label)},loadOptions:this.loadDatasources,defaultOptions:!0,value:this.state.datasourceSelectables.find((function(r){return r.value==e.datasourceId})),invalid:!this.state.datasourceSelectables.find((function(r){return r.value==e.datasourceId}))}))),a=y.a.createElement("div",{className:"gf-form-inline"},y.a.createElement("div",{className:"gf-form"},y.a.createElement(b.Label,{className:"gf-form-label query-keyword width-7 margin-1"},"Archive"),y.a.createElement(b.AsyncSelect,{className:"min-width-15",key:e.datasourceId,placeholder:"Select an archive...",onChange:function(t){r(s(s({},e),{archiveId:t.value}),"Variables for the Archive "+t.label)},loadOptions:this.loadArchives,defaultOptions:!0,value:this.state.archiveSelectables.find((function(r){return r.value==e.archiveId})),invalid:!this.state.archiveSelectables.find((function(r){return r.value==e.archiveId}))})));return y.a.createElement("div",null,y.a.createElement("div",{className:"gf-form-group"},y.a.createElement("div",{className:"gf-form-inline"},y.a.createElement("div",{className:"gf-form"},y.a.createElement(b.Label,{className:"gf-form-label query-keyword width-7 margin-1"},"Query Type"),y.a.createElement(b.Select,{className:"min-width-10",onChange:function(t){return r(s(s({},e),{queryType:t.value}),"Datasources of Service Grid")},options:this.state.queryTypeSelectables,value:this.state.queryTypeSelectables.find((function(r){return r.value==e.queryType}))}))),e.queryType!=l.Datasources&&t,e.queryType==l.VariablesForArchive&&a))},r}(h.Component);t.d(r,"plugin",(function(){return F}));var F=new a.DataSourcePlugin(m).setConfigEditor(g).setQueryEditor(A).setVariableQueryEditor(S)}])}));
//# sourceMappingURL=module.js.map