/*! For license information please see module.js.LICENSE.txt */
define(["react","@grafana/ui","@grafana/data","@grafana/runtime","lodash"],(function(e,t,r,a,n){return function(e){var t={};function r(a){if(t[a])return t[a].exports;var n=t[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(a,n,function(t){return e[t]}.bind(null,n));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r(r.s=56)}([function(t,r){t.exports=e},function(e,r){e.exports=t},function(e,t){e.exports=r},function(e,t){e.exports=a},function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t,r){var a=r(10),n=r(30),i=r(31),o=a?a.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":o&&o in Object(e)?n(e):i(e)}},function(e,t,r){var a=r(11),n="object"==typeof self&&self&&self.Object===Object&&self,i=a||n||Function("return this")();e.exports=i},function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},function(e,t){e.exports=function(e){return e}},function(e,t,r){var a=r(5),n=r(4);e.exports=function(e){if(!n(e))return!1;var t=a(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},function(e,t,r){var a=r(6).Symbol;e.exports=a},function(e,t,r){(function(t){var r="object"==typeof t&&t&&t.Object===Object&&t;e.exports=r}).call(this,r(29))},function(e,t){e.exports=function(e,t){return e===t||e!=e&&t!=t}},function(e,t,r){var a=r(9),n=r(14);e.exports=function(e){return null!=e&&n(e.length)&&!a(e)}},function(e,t){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},function(e,t){var r=/^(?:0|[1-9]\d*)$/;e.exports=function(e,t){var a=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==a||"symbol"!=a&&r.test(e))&&e>-1&&e%1==0&&e<t}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){var a=r(53),n=r(54);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var i={insert:"head",singleton:!1},o=(a(n,i),n.locals?n.locals:{});e.exports=o},function(e,t,r){var a=r(20),n=r(12),i=r(37),o=r(38),c=Object.prototype,l=c.hasOwnProperty,s=a((function(e,t){e=Object(e);var r=-1,a=t.length,s=a>2?t[2]:void 0;for(s&&i(t[0],t[1],s)&&(a=1);++r<a;)for(var u=t[r],f=o(u),v=-1,d=f.length;++v<d;){var p=f[v],m=e[p];(void 0===m||n(m,c[p])&&!l.call(e,p))&&(e[p]=u[p])}return e}));e.exports=s},function(e,t){e.exports=n},function(e,t,r){var a=r(8),n=r(21),i=r(23);e.exports=function(e,t){return i(n(e,t,a),e+"")}},function(e,t,r){var a=r(22),n=Math.max;e.exports=function(e,t,r){return t=n(void 0===t?e.length-1:t,0),function(){for(var i=arguments,o=-1,c=n(i.length-t,0),l=Array(c);++o<c;)l[o]=i[t+o];o=-1;for(var s=Array(t+1);++o<t;)s[o]=i[o];return s[t]=r(l),a(e,this,s)}}},function(e,t){e.exports=function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}},function(e,t,r){var a=r(24),n=r(36)(a);e.exports=n},function(e,t,r){var a=r(25),n=r(26),i=r(8),o=n?function(e,t){return n(e,"toString",{configurable:!0,enumerable:!1,value:a(t),writable:!0})}:i;e.exports=o},function(e,t){e.exports=function(e){return function(){return e}}},function(e,t,r){var a=r(27),n=function(){try{var e=a(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=n},function(e,t,r){var a=r(28),n=r(35);e.exports=function(e,t){var r=n(e,t);return a(r)?r:void 0}},function(e,t,r){var a=r(9),n=r(32),i=r(4),o=r(34),c=/^\[object .+?Constructor\]$/,l=Function.prototype,s=Object.prototype,u=l.toString,f=s.hasOwnProperty,v=RegExp("^"+u.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!i(e)||n(e))&&(a(e)?v:c).test(o(e))}},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){var a=r(10),n=Object.prototype,i=n.hasOwnProperty,o=n.toString,c=a?a.toStringTag:void 0;e.exports=function(e){var t=i.call(e,c),r=e[c];try{e[c]=void 0;var a=!0}catch(e){}var n=o.call(e);return a&&(t?e[c]=r:delete e[c]),n}},function(e,t){var r=Object.prototype.toString;e.exports=function(e){return r.call(e)}},function(e,t,r){var a,n=r(33),i=(a=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||""))?"Symbol(src)_1."+a:"";e.exports=function(e){return!!i&&i in e}},function(e,t,r){var a=r(6)["__core-js_shared__"];e.exports=a},function(e,t){var r=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return r.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},function(e,t){e.exports=function(e,t){return null==e?void 0:e[t]}},function(e,t){var r=Date.now;e.exports=function(e){var t=0,a=0;return function(){var n=r(),i=16-(n-a);if(a=n,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}},function(e,t,r){var a=r(12),n=r(13),i=r(15),o=r(4);e.exports=function(e,t,r){if(!o(r))return!1;var c=typeof t;return!!("number"==c?n(r)&&i(t,r.length):"string"==c&&t in r)&&a(r[t],e)}},function(e,t,r){var a=r(39),n=r(50),i=r(13);e.exports=function(e){return i(e)?a(e,!0):n(e)}},function(e,t,r){var a=r(40),n=r(41),i=r(43),o=r(44),c=r(15),l=r(46),s=Object.prototype.hasOwnProperty;e.exports=function(e,t){var r=i(e),u=!r&&n(e),f=!r&&!u&&o(e),v=!r&&!u&&!f&&l(e),d=r||u||f||v,p=d?a(e.length,String):[],m=p.length;for(var h in e)!t&&!s.call(e,h)||d&&("length"==h||f&&("offset"==h||"parent"==h)||v&&("buffer"==h||"byteLength"==h||"byteOffset"==h)||c(h,m))||p.push(h);return p}},function(e,t){e.exports=function(e,t){for(var r=-1,a=Array(e);++r<e;)a[r]=t(r);return a}},function(e,t,r){var a=r(42),n=r(7),i=Object.prototype,o=i.hasOwnProperty,c=i.propertyIsEnumerable,l=a(function(){return arguments}())?a:function(e){return n(e)&&o.call(e,"callee")&&!c.call(e,"callee")};e.exports=l},function(e,t,r){var a=r(5),n=r(7);e.exports=function(e){return n(e)&&"[object Arguments]"==a(e)}},function(e,t){var r=Array.isArray;e.exports=r},function(e,t,r){(function(e){var a=r(6),n=r(45),i=t&&!t.nodeType&&t,o=i&&"object"==typeof e&&e&&!e.nodeType&&e,c=o&&o.exports===i?a.Buffer:void 0,l=(c?c.isBuffer:void 0)||n;e.exports=l}).call(this,r(16)(e))},function(e,t){e.exports=function(){return!1}},function(e,t,r){var a=r(47),n=r(48),i=r(49),o=i&&i.isTypedArray,c=o?n(o):a;e.exports=c},function(e,t,r){var a=r(5),n=r(14),i=r(7),o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object DataView]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1,e.exports=function(e){return i(e)&&n(e.length)&&!!o[a(e)]}},function(e,t){e.exports=function(e){return function(t){return e(t)}}},function(e,t,r){(function(e){var a=r(11),n=t&&!t.nodeType&&t,i=n&&"object"==typeof e&&e&&!e.nodeType&&e,o=i&&i.exports===n&&a.process,c=function(){try{var e=i&&i.require&&i.require("util").types;return e||o&&o.binding&&o.binding("util")}catch(e){}}();e.exports=c}).call(this,r(16)(e))},function(e,t,r){var a=r(4),n=r(51),i=r(52),o=Object.prototype.hasOwnProperty;e.exports=function(e){if(!a(e))return i(e);var t=n(e),r=[];for(var c in e)("constructor"!=c||!t&&o.call(e,c))&&r.push(c);return r}},function(e,t){var r=Object.prototype;e.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||r)}},function(e,t){e.exports=function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}},function(e,t,r){"use strict";var a,n=function(){return void 0===a&&(a=Boolean(window&&document&&document.all&&!window.atob)),a},i=function(){var e={};return function(t){if(void 0===e[t]){var r=document.querySelector(t);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}e[t]=r}return e[t]}}(),o=[];function c(e){for(var t=-1,r=0;r<o.length;r++)if(o[r].identifier===e){t=r;break}return t}function l(e,t){for(var r={},a=[],n=0;n<e.length;n++){var i=e[n],l=t.base?i[0]+t.base:i[0],s=r[l]||0,u="".concat(l," ").concat(s);r[l]=s+1;var f=c(u),v={css:i[1],media:i[2],sourceMap:i[3]};-1!==f?(o[f].references++,o[f].updater(v)):o.push({identifier:u,updater:h(v,t),references:1}),a.push(u)}return a}function s(e){var t=document.createElement("style"),a=e.attributes||{};if(void 0===a.nonce){var n=r.nc;n&&(a.nonce=n)}if(Object.keys(a).forEach((function(e){t.setAttribute(e,a[e])})),"function"==typeof e.insert)e.insert(t);else{var o=i(e.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}return t}var u,f=(u=[],function(e,t){return u[e]=t,u.filter(Boolean).join("\n")});function v(e,t,r,a){var n=r?"":a.media?"@media ".concat(a.media," {").concat(a.css,"}"):a.css;if(e.styleSheet)e.styleSheet.cssText=f(t,n);else{var i=document.createTextNode(n),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(i,o[t]):e.appendChild(i)}}function d(e,t,r){var a=r.css,n=r.media,i=r.sourceMap;if(n?e.setAttribute("media",n):e.removeAttribute("media"),i&&btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleSheet)e.styleSheet.cssText=a;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(a))}}var p=null,m=0;function h(e,t){var r,a,n;if(t.singleton){var i=m++;r=p||(p=s(t)),a=v.bind(null,r,i,!1),n=v.bind(null,r,i,!0)}else r=s(t),a=d.bind(null,r,t),n=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(r)};return a(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;a(e=t)}else n()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=n());var r=l(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var a=0;a<r.length;a++){var n=c(r[a]);o[n].references--}for(var i=l(e,t),s=0;s<r.length;s++){var u=c(r[s]);0===o[u].references&&(o[u].updater(),o.splice(u,1))}r=i}}}},function(e,t,r){(t=r(55)(!0)).push([e.i,".min-width-10{min-width:10rem}.min-width-12{min-width:12rem}.min-width-20{min-width:20rem}.margin-1{padding-left:.5rem;padding-right:.5rem}.center{margin-top:.5rem;margin-left:.5rem;margin-right:.5rem}","",{version:3,sources:["app.css"],names:[],mappings:"AAAA,cAAc,eAAe,CAAC,cAAc,eAAe,CAAC,cAAc,eAAe,CAAC,UAAU,kBAAkB,CAAC,mBAAmB,CAAC,QAAQ,gBAAgB,CAAC,iBAAiB,CAAC,kBAAkB",file:"app.css",sourcesContent:[".min-width-10{min-width:10rem}.min-width-12{min-width:12rem}.min-width-20{min-width:20rem}.margin-1{padding-left:.5rem;padding-right:.5rem}.center{margin-top:.5rem;margin-left:.5rem;margin-right:.5rem}"]}]),e.exports=t},function(e,t,r){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r=function(e,t){var r=e[1]||"",a=e[3];if(!a)return r;if(t&&"function"==typeof btoa){var n=(o=a,c=btoa(unescape(encodeURIComponent(JSON.stringify(o)))),l="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(c),"/*# ".concat(l," */")),i=a.sources.map((function(e){return"/*# sourceURL=".concat(a.sourceRoot||"").concat(e," */")}));return[r].concat(i).concat([n]).join("\n")}var o,c,l;return[r].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(r,"}"):r})).join("")},t.i=function(e,r,a){"string"==typeof e&&(e=[[null,e,""]]);var n={};if(a)for(var i=0;i<this.length;i++){var o=this[i][0];null!=o&&(n[o]=!0)}for(var c=0;c<e.length;c++){var l=[].concat(e[c]);a&&n[l[0]]||(r&&(l[2]?l[2]="".concat(r," and ").concat(l[2]):l[2]=r),t.push(l))}},t}},function(e,t,r){"use strict";r.r(t);var a=r(2);function n(e,t,r,a){return new(r||(r=Promise))((function(n,i){function o(e){try{l(a.next(e))}catch(e){i(e)}}function c(e){try{l(a.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,c)}l((a=a.apply(e,t||[])).next())}))}Object.create;Object.create;var i,o,c;!function(e){e.ArchiveData="archiveData",e.VariableValues="variableValues",e.Alarms="alarms",e.Events="events"}(i||(i={})),function(e){e.ServiceEngine="ServiceEngine",e.DataStorage="DataStorage"}(o||(o={})),function(e){e.Datasources="Datasources",e.ArchivesForDatasource="ArchivesForDataSource",e.VariablesForArchive="VariablesForArchive",e.VariablesForDatasource="VariablesForDatasource"}(c||(c={}));var l={queryType:i.ArchiveData,alarmsEventsFilter:{variables:["*"],onlyActive:!1,onlyCleared:!1,onlyUnacknowledged:!1},archiveFilter:{origin:o.DataStorage,variables:[]},variableFilter:{variables:[]}},s={queryType:c.Datasources},u=r(3);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t,r){return(t=y(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(){d=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var i=t&&t.prototype instanceof p?t:p,o=Object.create(i.prototype),c=new T(n||[]);return a(o,"_invoke",{value:S(e,r,c)}),o}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var v={};function p(){}function m(){}function h(){}var y={};l(y,i,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(F([])));g&&g!==t&&r.call(g,i)&&(y=g);var O=h.prototype=p.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){var n;a(this,"_invoke",{value:function(a,i){function o(){return new t((function(n,o){!function a(n,i,o,c){var l=u(e[n],e,i);if("throw"!==l.type){var s=l.arg,v=s.value;return v&&"object"==f(v)&&r.call(v,"__await")?t.resolve(v.__await).then((function(e){a("next",e,o,c)}),(function(e){a("throw",e,o,c)})):t.resolve(v).then((function(e){s.value=e,o(s)}),(function(e){return a("throw",e,o,c)}))}c(l.arg)}(a,i,n,o)}))}return n=n?n.then(o,o):o()}})}function S(e,t,r){var a="suspendedStart";return function(n,i){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===n)throw i;return N()}for(r.method=n,r.arg=i;;){var o=r.delegate;if(o){var c=E(o,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===a)throw a="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a="executing";var l=u(e,t,r);if("normal"===l.type){if(a=r.done?"completed":"suspendedYield",l.arg===v)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(a="completed",r.method="throw",r.arg=l.arg)}}}function E(e,t){var r=t.method,a=e.iterator[r];if(void 0===a)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var n=u(a,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,v;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,v):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,v)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function F(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,n=function t(){for(;++a<e.length;)if(r.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:N}}function N(){return{value:void 0,done:!0}}return m.prototype=h,a(O,"constructor",{value:h,configurable:!0}),a(h,"constructor",{value:m,configurable:!0}),m.displayName=l(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,l(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},e.awrap=function(e){return{__await:e}},w(j.prototype),l(j.prototype,o,(function(){return this})),e.AsyncIterator=j,e.async=function(t,r,a,n,i){void 0===i&&(i=Promise);var o=new j(s(t,r,a,n),i);return e.isGeneratorFunction(r)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},w(O),l(O,c,"Generator"),l(O,i,(function(){return this})),l(O,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var a in t)r.push(a);return r.reverse(),function e(){for(;r.length;){var a=r.pop();if(a in t)return e.value=a,e.done=!1,e}return e.done=!0,e}},e.values=F,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function a(r,a){return o.type="throw",o.arg=e,t.next=r,a&&(t.method="next",t.arg=void 0),!!a}for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(c&&l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var n=this.tryEntries[a];if(n.tryLoc<=this.prev&&r.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var a=r.completion;if("throw"===a.type){var n=a.arg;x(r)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:F(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),v}},e}function p(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(c)throw i}}}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function h(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,y(a.key),a)}}function y(e){var t=function(e,t){if("object"!==f(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!==f(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===f(t)?t:String(t)}function b(e,t){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=w(e);if(t){var n=w(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return O(this,r)}}function O(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}(f,e);var t,r,l,s=g(f);function f(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(t=s.call(this,e)).url=e.url,t.showOfflineDatasources=e.jsonData.showOfflineDatasources||!1,t}return t=f,(r=[{key:"query",value:function(e){return n(this,void 0,void 0,d().mark((function t(){var r,a,n,o,c,l,s,u=this;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((r=e.targets.filter((function(e){return 1!=e.hide}))).forEach((function(t){t=u.replaceTemplateVariables(t,e.scopedVars)})),a=e.range.from,n=e.range.to,0!==r.length){t.next=6;break}return t.abrupt("return",Promise.resolve({data:[]}));case 6:o=[],c=p(r),t.prev=8,c.s();case 10:if((l=c.n()).done){t.next=24;break}if((s=l.value).datasourceId&&(s.queryType!=i.ArchiveData||s.archiveFilter.archiveId&&0!=s.archiveFilter.variables.length)){t.next=14;break}return t.abrupt("continue",22);case 14:t.t0=s.queryType,t.next=t.t0===i.ArchiveData?17:t.t0===i.Alarms||t.t0===i.Events?19:t.t0===i.VariableValues?21:22;break;case 17:return o.push(this.queryArchiveValues(s,a,n)),t.abrupt("break",22);case 19:return o.push(this.queryAlarmsEvents(s,a,n)),t.abrupt("break",22);case 21:o.push(this.queryOnlineValues(s));case 22:t.next=10;break;case 24:t.next=29;break;case 26:t.prev=26,t.t1=t.catch(8),c.e(t.t1);case 29:return t.prev=29,c.f(),t.finish(29);case 32:return t.abrupt("return",Promise.all(o).then((function(e){return Promise.resolve({data:e.flat()})})));case 33:case"end":return t.stop()}}),t,this,[[8,26,29,32]])})))}},{key:"replaceTemplateVariables",value:function(e,t){e.datasourceId=Object(u.getTemplateSrv)().replace(e.datasourceId,t),e.archiveFilter.archiveId=Object(u.getTemplateSrv)().replace(e.archiveFilter.archiveId,t);var r=function(e){var r,a=[],n=p(e);try{for(n.s();!(r=n.n()).done;){var i=r.value,o=Object(u.getTemplateSrv)().replace(i,t);'["'==o.substr(0,2)?a=a.concat(JSON.parse(o)):a.push(o.replace(/['"]+/g,""))}}catch(e){n.e(e)}finally{n.f()}return a};return e.archiveFilter.variables=r(e.archiveFilter.variables),e.alarmsEventsFilter.variables=r(e.alarmsEventsFilter.variables),e.variableFilter.variables=r(e.variableFilter.variables),e}},{key:"metricFindQuery",value:function(e,t){return n(this,void 0,void 0,d().mark((function t(){var r;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=new RegExp("");try{r=new RegExp(e.regexString,"i")}catch(e){}t.t0=e.queryType,t.next=t.t0===c.Datasources?5:t.t0===c.ArchivesForDatasource?7:t.t0===c.VariablesForArchive?9:t.t0===c.VariablesForDatasource?11:13;break;case 5:return t.abrupt("return",this.findDataSources().then((function(e){var t,a=[],n=p(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;null!=i.label.match(r)&&a.push({text:i.label,value:i.value})}}catch(e){n.e(e)}finally{n.f()}return Promise.resolve(a)})));case 7:return t.abrupt("return",this.findArchives(e.datasourceId).then((function(e){var t,a=[],n=p(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;null!=i.label.match(r)&&a.push({text:i.label,value:i.value})}}catch(e){n.e(e)}finally{n.f()}return Promise.resolve(a)})));case 9:return t.abrupt("return",this.findVariablesForArchive(e.datasourceId,e.archiveId).then((function(e){var t,a=[],n=p(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;null!=i.label.match(r)&&a.push({text:i.label,value:i.value})}}catch(e){n.e(e)}finally{n.f()}return Promise.resolve(a)})));case 11:return t.abrupt("return",this.findVariables(e.datasourceId).then((function(e){var t,a=[],n=p(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;null!=i.label.match(r)&&a.push({text:i.label,value:i.value})}}catch(e){n.e(e)}finally{n.f()}return Promise.resolve(a)})));case 13:case"end":return t.stop()}}),t,this)})))}},{key:"testDatasource",value:function(){return n(this,void 0,void 0,d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(u.getBackendSrv)().datasourceRequest({url:this.url+"/",method:"GET"}).then((function(e){return Promise.resolve({status:"success",message:"Connection test successful"})}),(function(e){return Promise.resolve({status:"error",message:"Error: "+e.status+" "+e.statusText})})));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"queryArchiveValues",value:function(e,t,r){var n=this.url+"/api/v2/datasources/"+e.datasourceId+"/archives/"+e.archiveFilter.archiveId+"/query",i={variableFilter:{variableNames:e.archiveFilter.variables},timeFilter:{from:t.toISOString(),to:r.toISOString(),type:"Absolute"},origin:e.archiveFilter.origin};return Object(u.getBackendSrv)().datasourceRequest({url:n,data:i,method:"POST"}).then((function(t){if(!("data"in t)||!("variables"in t.data))throw{data:{message:"Query Error: Retrieved data has invalid format"}};var r,n=[],i=p(t.data.variables);try{for(i.s();!(r=i.n()).done;){var o,c=r.value,l=new a.MutableDataFrame({refId:e.refId,fields:[{name:c.archiveVariable.variableName,type:a.FieldType.number},{name:"time",type:a.FieldType.time}]}),s=p(c.values);try{for(s.s();!(o=s.n()).done;){var u=o.value,f=Date.parse(u.timestamp),d=u.value;isNaN(d)||(d=Number(d)),l.add(v({time:f},c.archiveVariable.variableName,d))}}catch(e){s.e(e)}finally{s.f()}if(!("archiveVariable"in c)||!("variableName"in c.archiveVariable))throw{data:{message:"Query Error: Retrieved data has invalid format"}};n.push(l)}}catch(e){i.e(e)}finally{i.f()}return Promise.resolve(n)}),this.handleHttpErrors).catch(this.handleQueryException)}},{key:"queryOnlineValues",value:function(e){var t=this.url+"/api/v1/datasources/"+e.datasourceId+"/variables/query",r={nameFilter:{variableNames:e.variableFilter.variables},fields:["name","value","lastUpdateTime"]};return Object(u.getBackendSrv)().datasourceRequest({url:t,data:r,method:"POST"}).then((function(t){if(!("data"in t)||!("variables"in t.data))throw{data:{message:"Query Error: Retrieved data has invalid format"}};var r,n=[],i=p(t.data.variables);try{for(i.s();!(r=i.n()).done;){var o=r.value,c=new a.MutableDataFrame({refId:e.refId,fields:[{name:o.name,type:a.FieldType.number},{name:"time",type:a.FieldType.time}]});c.add(v({time:o.lastUpdateTime},o.name,o.value)),n.push(c)}}catch(e){i.e(e)}finally{i.f()}return Promise.resolve(n)}),this.handleHttpErrors).catch(this.handleQueryException)}},{key:"queryAlarmsEvents",value:function(e,t,r){var n=this.url+"/api/v1/datasources/"+e.datasourceId;e.queryType==i.Alarms?n+="/alarms/query":e.queryType==i.Events&&(n+="/events/query");var o={timeFilter:{from:t.toISOString(),to:r.toISOString(),type:"Absolute"},variableFilter:{variableNames:e.alarmsEventsFilter.variables}};if(void 0!==e.alarmsEventsFilter&&e.queryType==i.Alarms){var c=[];e.alarmsEventsFilter.onlyActive&&c.push("OnlyActive"),e.alarmsEventsFilter.onlyCleared&&c.push("OnlyCleared"),e.alarmsEventsFilter.onlyUnacknowledged&&c.push("OnlyUnacknowledged"),c.length>0&&(o.filterFlags=c)}return Object(u.getBackendSrv)().datasourceRequest({url:n,data:o,method:"POST"}).then((function(t){if(!("data"in t)||e.queryType==i.Alarms&&!("alarms"in t.data)||e.queryType==i.Events&&!("events"in t.data))throw{data:{message:"Query Error: Retrieved data has invalid format"}};var r=[];"alarms"in t.data?r=t.data.alarms:"events"in t.data&&(r=t.data.events);var n=void 0;switch(e.queryType){default:case i.Alarms:var o,c=new a.MutableDataFrame({refId:e.refId,fields:[{name:"id",type:a.FieldType.string,config:{displayName:"Id"}},{name:"variableName",type:a.FieldType.string,config:{displayName:"Variable Name"}},{name:"value",type:a.FieldType.other,config:{displayName:"Value"}},{name:"text",type:a.FieldType.string,config:{displayName:"Text"}},{name:"comment",type:a.FieldType.string,config:{displayName:"Comment"}},{name:"receivedTime",type:a.FieldType.time,config:{displayName:"Time Received"}},{name:"clearedTime",type:a.FieldType.time,config:{displayName:"Time Cleared"}},{name:"acknowledgedTime",type:a.FieldType.time,config:{displayName:"Time Acknowledged"}},{name:"computer",type:a.FieldType.string,config:{displayName:"Computer"}},{name:"acknowledgedBy",type:a.FieldType.string,config:{displayName:"Acknowledged by"}}]}),l=p(r);try{for(l.s();!(o=l.n()).done;){var s=o.value;c.add({id:s.id||null,variableName:s.variableName||null,value:s.value||null,text:s.text||null,comment:s.comment||null,receivedTime:Date.parse(s.receivedTime)||null,clearedTime:Date.parse(s.clearedTime)||null,acknowledgedTime:Date.parse(s.acknowledgedTime)||null,computer:s.computer||null,acknowledgedBy:s.username||s.userFullName||null})}}catch(e){l.e(e)}finally{l.f()}n=c;break;case i.Events:var u,f=new a.MutableDataFrame({refId:e.refId,fields:[{name:"id",type:a.FieldType.string,config:{displayName:"Id"}},{name:"variableName",type:a.FieldType.string,config:{displayName:"Variable Name"}},{name:"value",type:a.FieldType.other,config:{displayName:"Value"}},{name:"text",type:a.FieldType.string,config:{displayName:"Text"}},{name:"comment",type:a.FieldType.string,config:{displayName:"Comment"}},{name:"receivedTime",type:a.FieldType.time,config:{displayName:"Time Received"}},{name:"computer",type:a.FieldType.string,config:{displayName:"Computer"}},{name:"user",type:a.FieldType.string,config:{displayName:"User"}}]}),v=p(r);try{for(v.s();!(u=v.n()).done;){var d=u.value;f.add({id:d.id||null,variableName:d.variableName||null,value:d.value||null,text:d.text||null,comment:d.comment||null,receivedTime:Date.parse(d.receivedTime)||null,computer:d.computer||null,user:d.username||d.userFullName||null})}}catch(e){v.e(e)}finally{v.f()}n=f}return Promise.resolve([n])}),this.handleHttpErrors).catch(this.handleQueryException)}},{key:"findDataSources",value:function(){var e=this;return Object(u.getBackendSrv)().datasourceRequest({url:this.url+"/api/v2/datasources",method:"GET"}).then((function(t){var r=[];if(!("dataSourcesOrigin"in t.data))throw{data:{message:"Query Error: Could not parse list of data sources"}};var a=t.data.dataSourcesOrigin;if(void 0===a||a instanceof Array==0)throw{data:{message:"Query Error: Could not parse list of data sources"}};var n,i=p(a);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(!("dataSourceId"in o)||!("name"in o)||!("dataOrigin"in o))throw{data:{message:"Query Error: Unknown/Invalid format"}};if(0!=o.dataOrigin.filter((function(e){return"Available"==e.state})).length||e.showOfflineDatasources){var c={label:o.name,value:o.dataSourceId};r.push(c)}}}catch(e){i.e(e)}finally{i.f()}return r.sort((function(e,t){return e.label>t.label?1:-1})),Promise.resolve(r)}),this.handleHttpErrors).catch(this.handleQueryException)}},{key:"findArchives",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.DataStorage;return null==e||""==e?Promise.resolve([]):(e=Object(u.getTemplateSrv)().replace(e),Object(u.getBackendSrv)().datasourceRequest({url:this.url+"/api/v2/datasources/"+e+"/archives",method:"GET"}).then((function(e){var r=[];if(!("archives"in e.data))throw{data:{message:"Query Error: Could not parse list of archives"}};var a=e.data.archives;if(void 0===a||a instanceof Array==0)throw{data:{message:"Query Error: Could not parse list of archives"}};return function e(a,n){var i,o=p(a);try{for(o.s();!(i=o.n()).done;){var c=i.value;if(!("identification"in c)||!("name"in c))throw{data:{message:"Query Error: Unknown/Invalid format"}};var l={label:(n?"- aggregated - ":"")+c.name,value:c.identification};-1!=c.dataOrigin.indexOf(t)&&r.push(l),"aggregatedArchives"in c&&e(c.aggregatedArchives,!0)}}catch(e){o.e(e)}finally{o.f()}}(a,!1),r.sort((function(e,t){return e.label.replace(/- aggregated - /,"")>t.label.replace(/- aggregated - /,"")?1:-1})),Promise.resolve(r)}),(function(e){return Promise.resolve([])})))}},{key:"findVariablesForArchive",value:function(e,t){return null==e||""==e||null==t||""==t?Promise.resolve([]):(e=Object(u.getTemplateSrv)().replace(e),t=Object(u.getTemplateSrv)().replace(t),Object(u.getBackendSrv)().datasourceRequest({url:this.url+"/api/v2/datasources/"+e+"/archives/"+t,method:"GET"}).then((function(e){if(!("variables"in e.data))throw{data:{message:"Query Error: Could not parse list of variables"}};var t=e.data.variables;if(void 0===t||t instanceof Array==0)throw{data:{message:"Query Error: Could not parse list of variables"}};var r=t.map((function(e){return{label:e.variableName,value:e.variableName}}));return r.sort((function(e,t){return e.label>t.label?1:-1})),Promise.resolve(r)}),this.handleHttpErrors).catch(this.handleQueryException))}},{key:"findVariables",value:function(e){if(null==e||""==e)return Promise.resolve([]);e=Object(u.getTemplateSrv)().replace(e);var t=this.url+"/api/v1/datasources/"+e+"/variables/query";return Object(u.getBackendSrv)().datasourceRequest({url:t,data:{fields:["name"],nameFilter:{variableNames:["*"]}},method:"POST"}).then((function(e){if(!("variables"in e.data))throw{data:{message:"Query Error: Could not parse list of variables"}};var t=e.data.variables.map((function(e){return{label:e.name,value:e.name}}));return t.sort((function(e,t){return e.label>t.label?1:-1})),Promise.resolve(t)}),this.handleHttpErrors).catch(this.handleQueryException)}},{key:"handleHttpErrors",value:function(e){throw 401===e.status&&(e.message="Authorization Error: "+e.status+" Unauthorized"),400==e.status&&(void 0!==e.data&&void 0!==e.data.errorMessage&&void 0!==e.data.variableErrors?e.message="Bad Request: "+e.data.errorMessage+"; Details: "+JSON.stringify(e.data.variableErrors):e.message="Bad Request"),void 0!==e.data&&void 0!==e.data.errorMessage&&(e.message=e.data.errorMessage),new Error(e.message)}},{key:"handleQueryException",value:function(e){return"data"in e&&void 0!==e.data?Promise.reject(e):Promise.reject({data:{message:"Query Error: Error during requesting data from API. "+e.message}})}}])&&h(t.prototype,r),l&&h(t,l),Object.defineProperty(t,"prototype",{writable:!1}),f}(a.DataSourceApi),S=r(0),E=r.n(S),A=r(1);function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function F(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,(n=a.key,i=void 0,i=function(e,t){if("object"!==x(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!==x(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(n,"string"),"symbol"===x(i)?i:String(i)),a)}var n,i}function N(e,t){return(N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=D(e);if(t){var n=D(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return P(this,r)}}function P(e,t){if(t&&("object"===x(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var C=A.LegacyForms.Switch,I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&N(e,t)}(o,e);var t,r,n,i=k(o);function o(){var e;return T(this,o),(e=i.apply(this,arguments)).onOptionsChange=function(t){var r=e.props,a=r.onOptionsChange,n=r.options,i=Object.assign(Object.assign({},n.jsonData),{showOfflineDatasources:t.target.checked});a(Object.assign(Object.assign({},n),{jsonData:i}))},e}return t=o,(r=[{key:"render",value:function(){var e,t=this.props,r=t.options,n=t.onOptionsChange;return E.a.createElement("div",{className:"gf-form-group"},E.a.createElement("div",{className:"gf-form"},E.a.createElement(A.DataSourceHttpSettings,{defaultUrl:"https://localhost:9443/iiot-api",dataSourceConfig:r,showAccessOptions:!0,onChange:n})),E.a.createElement("div",{className:"gf-form"},E.a.createElement("div",{className:"gf-form-group"},E.a.createElement("h3",{className:"page-heading"},"Misc"),E.a.createElement("div",{className:"gf-form-group"},E.a.createElement("div",{className:"gf-form"},E.a.createElement(C,{checked:null!==(e=r.jsonData.showOfflineDatasources)&&void 0!==e&&e,label:"Show offline Datasources",labelClass:"width-14",onChange:Object(a.onUpdateDatasourceJsonDataOptionChecked)(this.props,"showOfflineDatasources"),tooltip:"Check this option to include temporary offline data sources in the query editor"}))))))}}])&&F(t.prototype,r),n&&F(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(S.PureComponent),q=r(18),V=r.n(q);r(17);function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return L(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return L(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(c)throw i}}}}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function B(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,(n=a.key,i=void 0,i=function(e,t){if("object"!==_(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!==_(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(n,"string"),"symbol"===_(i)?i:String(i)),a)}var n,i}function M(e,t){return(M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=$(e);if(t){var n=$(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return U(this,r)}}function U(e,t){if(t&&("object"===_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function $(e){return($=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var G=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&M(e,t)}(s,e);var t,r,a,n=Q(s);function s(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=n.call(this,e)).getTemplateVariables=function(e){var t,r=Object(u.getTemplateSrv)().getVariables(),a=JSON.stringify(r),n=[],i=R(JSON.parse(a));try{for(i.s();!(t=i.n()).done;){var o=t.value;"query"==o.type&&o.query.queryType==e&&n.push(o)}}catch(e){i.e(e)}finally{i.f()}return n},t.componentDidMount=function(){t.props.datasource.findDataSources().then((function(e){var r,a=R(t.getTemplateVariables(c.Datasources));try{for(a.s();!(r=a.n()).done;){var n=r.value;e.unshift({label:"$"+n.name,value:"$"+n.name})}}catch(e){a.e(e)}finally{a.f()}t.setState({datasourceSelectables:e})}))},t.loadArchives=function(){var e=t.props,r=e.query,a=e.datasource;return new Promise((function(e){a.findArchives(r.datasourceId,r.archiveFilter.origin).then((function(r){var a,n=R(t.getTemplateVariables(c.ArchivesForDatasource));try{for(n.s();!(a=n.n()).done;){var i=a.value;r.unshift({label:"$"+i.name,value:"$"+i.name})}}catch(e){n.e(e)}finally{n.f()}t.setState({archiveSelectables:r}),e(r)}))}))},t.loadArchiveVariables=function(){var e=t.props,r=e.query,a=e.datasource;return new Promise((function(e){a.findVariablesForArchive(r.datasourceId,r.archiveFilter.archiveId).then((function(r){var a,n=R(t.getTemplateVariables(c.VariablesForArchive));try{for(n.s();!(a=n.n()).done;){var i=a.value;r.unshift({label:"$"+i.name,value:"${"+i.name+":json}"})}}catch(e){n.e(e)}finally{n.f()}t.setState({archiveVariableSelectables:r}),e(r)}))}))},t.loadVariables=function(){var e=t.props,r=e.query,a=e.datasource;return new Promise((function(e){a.findVariables(r.datasourceId).then((function(r){var a,n=R(t.getTemplateVariables(c.VariablesForDatasource));try{for(n.s();!(a=n.n()).done;){var i=a.value;r.unshift({label:"$"+i.name,value:"${"+i.name+":json}"})}}catch(e){n.e(e)}finally{n.f()}r.unshift({label:"*",value:"*"}),t.setState({variableSelectables:r}),e(r)}))}))},t.onSwitchChanged=function(e){var r=t.props,a=r.query;(0,r.onChange)(Object.assign(Object.assign({},a),{alarmsEventsFilter:Object.assign(Object.assign({},a.alarmsEventsFilter),{onlyActive:!a.alarmsEventsFilter.onlyActive})}))};var r={label:"Archive Data",value:i.ArchiveData},a={label:"Online Values",value:i.VariableValues},l={label:"Alarms",value:i.Alarms},f={label:"Events",value:i.Events},v=[{label:"Data Storage",value:o.DataStorage},{label:"Serivce Engine",value:o.ServiceEngine}];return t.state={datasourceSelectables:[],queryTypeSelectables:[r,a,l,f],archiveSelectables:[],archiveVariableSelectables:[],variableSelectables:[],dataOriginSelectables:v},t}return t=s,(r=[{key:"render",value:function(){var e,t=V()(this.props.query,l),r=this.props,a=r.onChange,n=r.onRunQuery,o=t.datasourceId,c=t.queryType,s=t.archiveFilter,u=t.alarmsEventsFilter,f=t.variableFilter,v=E.a.createElement("div",{className:"gf-form"},E.a.createElement(A.Label,{className:"gf-form-label query-keyword width-7 margin-1"},"Origin"),E.a.createElement(A.Select,{className:"min-width-15",onChange:function(e){a(Object.assign(Object.assign({},t),{archiveFilter:Object.assign(Object.assign({},t.archiveFilter),{origin:e.value})}))},options:this.state.dataOriginSelectables,value:this.state.dataOriginSelectables.find((function(e){return e.value==s.origin}))})),d=E.a.createElement("div",{className:"gf-form-inline"},E.a.createElement("div",{className:"gf-form"},E.a.createElement(A.Label,{className:"gf-form-label query-keyword width-7 margin-1"},"Archive"),E.a.createElement(A.AsyncSelect,{className:"min-width-15",key:JSON.stringify([t.datasourceId,t.archiveFilter.origin]),placeholder:"Select an archive...",onChange:function(e){a(Object.assign(Object.assign({},t),{archiveFilter:Object.assign(Object.assign({},t.archiveFilter),{archiveId:e.value})}))},loadOptions:this.loadArchives,defaultOptions:!0,value:this.state.archiveSelectables.find((function(e){return e.value==s.archiveId})),invalid:!this.state.archiveSelectables.find((function(e){return e.value==s.archiveId}))})),E.a.createElement("div",{className:"gf-form"},E.a.createElement(A.Label,{className:"gf-form-label query-keyword width-7 margin-1"},"Variable"),E.a.createElement(A.AsyncMultiSelect,{className:"min-width-15",key:JSON.stringify([t.datasourceId,t.archiveFilter.origin,t.archiveFilter.archiveId]),placeholder:"Select a variable...",onChange:function(e){a(Object.assign(Object.assign({},t),{archiveFilter:Object.assign(Object.assign({},t.archiveFilter),{variables:e.map((function(e){return e.value}))})})),n()},loadOptions:this.loadArchiveVariables,defaultOptions:!0,value:this.state.archiveVariableSelectables.filter((function(e){return s.variables.includes(e.value)})),invalid:0==this.state.archiveVariableSelectables.filter((function(e){return s.variables.includes(e.value)})).length}))),p=E.a.createElement("div",{className:"gf-form-inline"},E.a.createElement("div",{className:"gf-form"},E.a.createElement(A.Label,{className:"gf-form-label query-keyword width-7 margin-1"},"Variable Filter"),E.a.createElement(A.AsyncMultiSelect,{className:"min-width-10",key:t.queryType,onChange:function(e){a(Object.assign(Object.assign({},t),{alarmsEventsFilter:Object.assign(Object.assign({},t.alarmsEventsFilter),{variables:e.map((function(e){return e.value}))})})),n()},loadOptions:this.loadVariables,defaultOptions:!0,value:this.state.variableSelectables.filter((function(e){return u.variables.includes(e.value)})),invalid:0==this.state.variableSelectables.filter((function(e){return u.variables.includes(e.value)})).length})),E.a.createElement("div",{className:"gf-form"},E.a.createElement(A.Label,{className:"gf-form-label query-keyword margin-1"},"Only Active"),E.a.createElement(A.Field,null,E.a.createElement("div",{className:"center"},E.a.createElement(A.Switch,{onChange:function(e){a(Object.assign(Object.assign({},t),{alarmsEventsFilter:Object.assign(Object.assign({},t.alarmsEventsFilter),{onlyActive:!t.alarmsEventsFilter.onlyActive})})),n()},value:u.onlyActive})))),E.a.createElement("div",{className:"gf-form"},E.a.createElement(A.Label,{className:"gf-form-label query-keyword margin-1"},"Only Cleared"),E.a.createElement(A.Field,null,E.a.createElement("div",{className:"center"},E.a.createElement(A.Switch,{onChange:function(e){a(Object.assign(Object.assign({},t),{alarmsEventsFilter:Object.assign(Object.assign({},t.alarmsEventsFilter),{onlyCleared:!t.alarmsEventsFilter.onlyCleared})})),n()},value:u.onlyCleared})))),E.a.createElement("div",{className:"gf-form"},E.a.createElement(A.Label,{className:"gf-form-label query-keyword margin-1"},"Only Unacknowledged"),E.a.createElement(A.Field,null,E.a.createElement("div",{className:"center"},E.a.createElement(A.Switch,{onChange:function(e){a(Object.assign(Object.assign({},t),{alarmsEventsFilter:Object.assign(Object.assign({},t.alarmsEventsFilter),{onlyUnacknowledged:!t.alarmsEventsFilter.onlyUnacknowledged})})),n()},value:u.onlyUnacknowledged}))))),m=E.a.createElement("div",{className:"gf-form-inline"},E.a.createElement("div",{className:"gf-form"},E.a.createElement(A.Label,{className:"gf-form-label query-keyword width-7 margin-1"},"Variable Filter"),E.a.createElement(A.AsyncMultiSelect,{className:"min-width-15",key:t.queryType,onChange:function(e){a(Object.assign(Object.assign({},t),{alarmsEventsFilter:Object.assign(Object.assign({},t.alarmsEventsFilter),{variables:e.map((function(e){return e.value}))})})),n()},loadOptions:this.loadVariables,defaultOptions:!0,value:this.state.variableSelectables.filter((function(e){return u.variables.includes(e.value)})),invalid:0==this.state.variableSelectables.filter((function(e){return u.variables.includes(e.value)})).length}))),h=E.a.createElement("div",{className:"gf-form-inline"},E.a.createElement("div",{className:"gf-form"},E.a.createElement(A.Label,{className:"gf-form-label query-keyword width-7 margin-1"},"Variable Filter"),E.a.createElement(A.AsyncMultiSelect,{className:"min-width-15",key:t.queryType,onChange:function(e){a(Object.assign(Object.assign({},t),{variableFilter:Object.assign(Object.assign({},t.variableFilter),{variables:e.map((function(e){return e.value}))})})),n()},loadOptions:this.loadVariables,defaultOptions:!0,value:this.state.variableSelectables.filter((function(e){return f.variables.includes(e.value)})),invalid:0==this.state.variableSelectables.filter((function(e){return f.variables.includes(e.value)})).length})));switch(t.queryType){case i.ArchiveData:e=d;break;case i.Alarms:e=p;break;case i.Events:e=m;break;case i.VariableValues:e=h}return E.a.createElement("div",null,E.a.createElement("div",{className:"gf-form-group"},E.a.createElement("div",{className:"gf-form-inline"},E.a.createElement("div",{className:"gf-form"},E.a.createElement(A.Label,{className:"gf-form-label query-keyword width-7 margin-1"},"Datasource"),E.a.createElement(A.Select,{className:"min-width-20",placeholder:"Select a datasource...",onChange:function(e){return a(Object.assign(Object.assign({},t),{datasourceId:e.value}))},options:this.state.datasourceSelectables,value:this.state.datasourceSelectables.find((function(e){return e.value==t.datasourceId})),invalid:!o}))),E.a.createElement("div",{className:"gf-form-inline"},E.a.createElement("div",{className:"gf-form"},E.a.createElement(A.Label,{className:"gf-form-label query-keyword width-7 margin-1"},"Query Type"),E.a.createElement(A.Select,{className:"min-width-10",onChange:function(e){a(Object.assign(Object.assign({},t),{queryType:e.value})),n()},options:this.state.queryTypeSelectables,value:this.state.queryTypeSelectables.find((function(e){return e.value==c}))})),t.queryType==i.ArchiveData&&v),e))}}])&&B(t.prototype,r),a&&B(t,a),Object.defineProperty(t,"prototype",{writable:!1}),s}(S.Component),H=r(19);function J(e){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,(n=a.key,i=void 0,i=function(e,t){if("object"!==J(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!==J(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(n,"string"),"symbol"===J(i)?i:String(i)),a)}var n,i}function Y(e,t){return(Y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function W(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=X(e);if(t){var n=X(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return K(this,r)}}function K(e,t){if(t&&("object"===J(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function X(e){return(X=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Z=A.LegacyForms.Input,ee=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Y(e,t)}(i,e);var t,r,a,n=W(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=n.call(this,e)).createDefinitionText=function(e){var r,a,n,i=null===(r=t.state.datasourceSelectables.find((function(t){return t.value==e.datasourceId})))||void 0===r?void 0:r.label,o=null===(a=t.state.archiveSelectables.find((function(t){return t.value==e.archiveId})))||void 0===a?void 0:a.label;switch(e.queryType){case c.Datasources:n="IIoT Services Datasources";break;case c.ArchivesForDatasource:n="Archives for the IIoT Services Datasource "+i;break;case c.VariablesForDatasource:n="Variables for the IIoT Services Datasource "+i;break;case c.VariablesForArchive:n="Variables for archive "+o+" of the IIoT Services Datasource "+i}return n},t.loadDatasources=function(){var e=t.props.datasource;return new Promise((function(r){e.findDataSources().then((function(e){t.setState({datasourceSelectables:e}),r(e)}))}))},t.loadArchives=function(){var e=t.props,r=e.query,a=e.datasource;return new Promise((function(e){a.findArchives(r.datasourceId).then((function(r){t.setState({archiveSelectables:r}),e(r)}))}))},t.isValidRegex=function(e){try{new RegExp(e)}catch(e){return!1}return!0};var r=[{label:"Datasources",value:c.Datasources},{label:"Archives for datasource",value:c.ArchivesForDatasource},{label:"Variables for datasource",value:c.VariablesForDatasource},{label:"Variables for archive",value:c.VariablesForArchive}];return t.state={datasourceSelectables:[],queryTypeSelectables:r,archiveSelectables:[],archiveVariableSelectables:[]},t}return t=i,(r=[{key:"render",value:function(){var e=this,t=Object(H.defaults)(this.props.query,s),r=this.props.onChange;this.props.onChange;var a=E.a.createElement("div",{className:"gf-form-inline"},E.a.createElement("div",{className:"gf-form"},E.a.createElement(A.Label,{className:"gf-form-label query-keyword width-10 margin-1"},"Datasource"),E.a.createElement(A.AsyncSelect,{className:"min-width-15",key:t.queryType,placeholder:"Select a datasource...",onChange:function(a){r(Object.assign(Object.assign({},t),{datasourceId:a.value}),e.createDefinitionText(Object.assign(Object.assign({},t),{datasourceId:a.value})))},loadOptions:this.loadDatasources,defaultOptions:!0,value:this.state.datasourceSelectables.find((function(e){return e.value==t.datasourceId})),invalid:!this.state.datasourceSelectables.find((function(e){return e.value==t.datasourceId}))}))),n=E.a.createElement("div",{className:"gf-form-inline"},E.a.createElement("div",{className:"gf-form"},E.a.createElement(A.Label,{className:"gf-form-label query-keyword width-10 margin-1"},"Archive"),E.a.createElement(A.AsyncSelect,{className:"min-width-15",key:t.datasourceId,placeholder:"Select an archive...",onChange:function(a){r(Object.assign(Object.assign({},t),{archiveId:a.value}),e.createDefinitionText(Object.assign(Object.assign({},t),{archiveId:a.value})))},loadOptions:this.loadArchives,defaultOptions:!0,value:this.state.archiveSelectables.find((function(e){return e.value==t.archiveId})),invalid:!this.state.archiveSelectables.find((function(e){return e.value==t.archiveId}))}))),i=E.a.createElement("div",{className:"gf-form-inline"},E.a.createElement("div",{className:"gf-form"},E.a.createElement(A.Label,{className:"gf-form-label query-keyword width-10 margin-1"},"Filter values"),E.a.createElement(A.Field,{className:"min-width-15",invalid:!this.isValidRegex(t.regexString),error:this.isValidRegex(t.regexString)?"":"Invalid regex pattern"},E.a.createElement(Z,{placeholder:"Apply regex filter to values ...",value:t.regexString,onChange:function(a){r(Object.assign(Object.assign({},t),{regexString:a.target.value}),e.createDefinitionText(Object.assign(Object.assign({},t),{regexString:a.target.value})))}}))));return E.a.createElement("div",null,E.a.createElement("div",{className:"gf-form-group"},E.a.createElement("div",{className:"gf-form-inline"},E.a.createElement("div",{className:"gf-form"},E.a.createElement(A.Label,{className:"gf-form-label query-keyword width-10 margin-1"},"Query Type"),E.a.createElement(A.Select,{className:"min-width-10",onChange:function(a){return r(Object.assign(Object.assign({},t),{queryType:a.value}),e.createDefinitionText(Object.assign(Object.assign({},t),{queryType:a.value})))},options:this.state.queryTypeSelectables,value:this.state.queryTypeSelectables.find((function(e){return e.value==t.queryType}))}))),t.queryType!=c.Datasources&&a,t.queryType==c.VariablesForArchive&&n,i))}}])&&z(t.prototype,r),a&&z(t,a),Object.defineProperty(t,"prototype",{writable:!1}),i}(S.Component);r.d(t,"plugin",(function(){return te}));var te=new a.DataSourcePlugin(j).setConfigEditor(I).setQueryEditor(G).setVariableQueryEditor(ee)}])}));
//# sourceMappingURL=module.js.map